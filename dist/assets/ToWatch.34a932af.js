import{$ as U,D as z,r as b,h as W,b as d,o as f,c as C,g as c,d as e,w as t,z as w,e as x,i as D,F as S,j as _,_ as F,C as P,f as G,t as Q,E as R,B as L,y as N}from"./index.c0242314.js";import{_ as O}from"./ImageCropper.a3d70761.js";const M={async fetchElementsByQuery(i){return U.get(`/guide/get-all-elements?name=${i}`)},async createGuideElement(i,s){return U.post(`/guide/create-element?name=${s}`,i,{headers:{"Content-Type":"multipart/form-data"}})}},T=z("guide",{state:()=>({toWatch:[]}),getters:{getTrips(i){return i.trips},getWhereToGo(i){return i.whereToGo}},actions:{async fetchElementsByQuery(i){try{const s=await M.fetchElementsByQuery(i);console.log(s),this[i]=s.data}catch(s){console.log(s)}},async createGuideElement(i,s){try{const n=await M.createGuideElement(i,s);console.log(n)}catch(n){console.log(n)}}}}),V=["onSubmit"],A=_(" \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 "),I=c("span",{class:"mdi mdi-12px mdi-plus"},null,-1),q=_(" \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E "),H={class:"d-flex ma-2",style:{"overflow-x":"scroll"}},J=["src"],K=c("h3",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u043E\u0442\u043E?",-1),X={class:"d-flex justify-center"},Y=_("\u0414\u0430 "),Z=_(" \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 "),ee=_(" \u0410\u0434\u0440\u0435\u0441 "),te=_(" \u0422\u0435\u043B\u0435\u0444\u043E\u043D "),ae=_(" \u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0435 \u0441\u0435\u0442\u0438 "),oe=_("\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),se={__name:"AddGuideElement",setup(i){const s=T();let n=b(!1),r=b(!1),v=b(null),g=b();const a=W({image:"",name:"",address:"",phone:"",socialMedia:"",description:""});function h(u){n.value=!1;const o=URL.createObjectURL(u);g.value=o,a.image=u}function y(){g.value="",r.value=!1}function k(){let u=new FormData(v.value);u.set("name",a.name),u.set("address",a.address),u.set("phone",a.phone),u.set("socialMedia",a.socialMedia),u.set("description",a.description),u.set("image",a.image,`${a.name}-${Date.now()}.png`),s.createGuideElement(u,"toWatch")}return(u,o)=>{const p=d("a-input"),m=d("a-col"),$=d("a-button"),E=d("a-modal"),j=d("a-textarea"),B=d("a-row");return f(),C(S,null,[c("form",{action:"POST",onSubmit:D(k,["prevent"]),enctype:"multipart/form-data",ref_key:"newGuideElementForm",ref:v},[e(B,{gutter:[16,16]},{default:t(()=>[e(m,{span:24},{default:t(()=>[A,e(p,{placeholder:"\u041C\u0443\u0437\u0435\u0439",size:"large",value:a.name,"onUpdate:value":o[0]||(o[0]=l=>a.name=l)},null,8,["value"])]),_:1}),e(m,{span:24},{default:t(()=>[e($,{onClick:o[1]||(o[1]=l=>w(n)?n.value=!0:n=!0),class:"mb-8",type:"dashed",block:""},{default:t(()=>[I,q]),_:1}),c("div",H,[c("img",{src:x(g),alt:"",class:"ma-4",style:{"max-width":"200px",cursor:"pointer"},onClick:o[2]||(o[2]=l=>{w(r)?r.value=!0:r=!0})},null,8,J),e(E,{visible:x(r),"onUpdate:visible":o[3]||(o[3]=l=>w(r)?r.value=l:r=l),footer:null},{default:t(()=>[K,c("div",X,[e($,{class:"mt-16",type:"primary",size:"large",onClick:y},{default:t(()=>[Y]),_:1})])]),_:1},8,["visible"])])]),_:1}),e(m,{span:24},{default:t(()=>[Z,e(j,{placeholder:"\u0411\u043E\u043B\u0435\u0435 1000 \u044D\u043A\u0441\u043F\u043E\u043D\u044F\u0442\u043E\u0432 \u0438\u0437 25 \u0441\u0442\u0440\u0430\u043D \u043C\u0438\u0440\u0430",rows:4,value:a.description,"onUpdate:value":o[4]||(o[4]=l=>a.description=l)},null,8,["value"])]),_:1}),e(m,{span:24},{default:t(()=>[ee,e(p,{placeholder:"\u041A\u0430\u043B\u0438\u043D\u0438\u043D\u0430 2\u0410",size:"large",value:a.address,"onUpdate:value":o[5]||(o[5]=l=>a.address=l)},null,8,["value"])]),_:1}),e(m,{span:24},{default:t(()=>[te,e(p,{placeholder:"79127528871",size:"large",value:a.phone,"onUpdate:value":o[6]||(o[6]=l=>a.phone=l)},null,8,["value"])]),_:1}),e(m,{span:24},{default:t(()=>[ae,e(p,{placeholder:"https://vk.com/qbitclub",size:"large",value:a.socialMedia,"onUpdate:value":o[7]||(o[7]=l=>a.socialMedia=l)},null,8,["value"])]),_:1})]),_:1}),e(B,{class:"d-flex justify-center"},{default:t(()=>[e(m,null,{default:t(()=>[e($,{type:"primary","html-type":"submit",class:"lets_go_btn mt-8",size:"large"},{default:t(()=>[oe]),_:1})]),_:1})]),_:1})],40,V),e(E,{visible:x(n),"onUpdate:visible":o[8]||(o[8]=l=>w(n)?n.value=l:n=l),footer:null},{default:t(()=>[e(O,{onAddImage:h})]),_:1},8,["visible"])],64)}}};const ne=["src"],le={class:"title"},ie={__name:"GuideCard",props:{element:Object},setup(i){const s=i;let n=P();function r(){n.push(`/company-info-page?_id=${s.element._id}`)}return(v,g)=>{const a=d("a-card");return f(),G(a,{hoverable:"",onClick:r},{cover:t(()=>[c("img",{src:s.element.image},null,8,ne)]),default:t(()=>[c("span",le,Q(s.element.name),1)]),_:1})}}},re=F(ie,[["__scopeId","data-v-fe98e5c7"]]),ue=c("h2",null,"\u0427\u0442\u043E \u043F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C",-1),de=_("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),pe={__name:"ToWatch",setup(i){const s=b(!1),n=T();n.fetchElementsByQuery("toWatch");let r=R(()=>n.toWatch);const v=()=>{s.value=!s.value};return(g,a)=>{const h=d("a-col"),y=d("a-row"),k=d("a-spin"),u=d("a-modal"),o=d("a-button");return f(),C("div",null,[e(L),e(y,{type:"flex",justify:"center"},{default:t(()=>[e(h,{xs:22,lg:16},{default:t(()=>[ue,x(r).length?(f(),G(y,{key:0},{default:t(()=>[(f(!0),C(S,null,N(x(r),p=>(f(),G(h,{lg:5,xs:10,class:"ma-16"},{default:t(()=>[e(re,{element:p},null,8,["element"])]),_:2},1024))),256))]),_:1})):(f(),G(y,{key:1},{default:t(()=>[e(h,{span:24,class:"d-flex justify-center align-center"},{default:t(()=>[e(k,{size:"large"})]),_:1})]),_:1})),e(u,{visible:s.value,"onUpdate:visible":a[0]||(a[0]=p=>s.value=p),title:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435",footer:null},{default:t(()=>[e(se)]),_:1},8,["visible"]),e(o,{type:"",onClick:v},{default:t(()=>[de]),_:1})]),_:1})]),_:1})])}}};export{pe as default};
